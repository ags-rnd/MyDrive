package pt.tecnico.myDrive.domain;

class FileSystem {
  Integer idCounter;
}

class Login {
  DateTime expirationDate;
  Long token;
}

class User {
  String username;
  String password;
  String name;
  String umask;
}


class File {
  String name;
  Integer id;
  DateTime lastModified;
  String userPermission;
  String othersPermission;
}

class PlainFile extends File {
  String data;
}

class Directory extends File;

class RootDirectory extends Directory;

class Link extends PlainFile;

class App extends PlainFile;

relation DomainRootHasFileSystem {
  .pt.ist.fenixframework.DomainRoot playsRole root {
    multiplicity 0..1;
  }
  FileSystem playsRole fileSystem {
    multiplicity 0..1;
  }
}

relation FileSystemContainsUsers {
  FileSystem playsRole fileSystem;
  User playsRole users {
    multiplicity 1..*;
  }
}

relation FileSystemContainsFiles {
  FileSystem playsRole fileSystem;
  File playsRole files {
    multiplicity 1..*;
  }
}

relation LoginHasUser {
  Login playsRole login;
  User playsRole user {
    multiplicity 1;
  }
}

relation LoginHasCurrentDirectory {
  Login playsRole login;
  Directory playsRole currentDirectory {
    multiplicity 1;
  }
}

relation UserHasHomeDirectory {
  User playsRole user;
  Directory playsRole homeDirectory {
    multiplicity 1;
  }
}

relation FileHasOwner {
  File playsRole;
  User playsRole owner {
		multiplicity 1;
	}
}

relation DirectoryContainsFiles {
  Directory playsRole parent;
  File playsRole file {
    multiplicity *;
  }
}


